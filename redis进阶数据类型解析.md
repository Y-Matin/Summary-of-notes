## redis 数据类型解析

###
###
###
### 
### HyperLogLog  <不精确的去重计数方案>
#### 简介：
    - Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。

    - 在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。

    - 但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。

    - 比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。

#### 应用场景： 
1. 比如做单网站今日UV统计的时候，把每个用户都加到hyperloglog里面，最后直接统计hpyerloglog的数量就好了
#### 特点 ： 
1. 不会记录元素的内容 
2. 单个key提供去重计数统计，但是会有误差
#### 优点 ： 
1. 12 KB 内存，就可以计算接近 2^64 个不同元素
#### 缺点 ： 
1. 标准误差是：0.81%

### 布隆过滤器  <去重>
#### 简介

#### 应用场景
1. 用户内容推荐，避免推荐已经推荐过的数据
2. 数据库查询优化：查询请求发出时，可以根据这个请求判定某个row存在不，如果布隆过滤器说不存在，则肯定不存在。如果说存在才去查询磁盘
#### 特点：
1. 当布隆过滤器说某个值存在时，这个值可能不存在；当它说不存在时，那就肯定不存在。
2. 可以通过参数设置，达到无误差的程度。


### Bitmaps 位图  
#### 简介：
> bitmaps不是一个真实的数据结构。而是String类型上的一组面向bit操作的集合。由于strings是二进制安全的blob，并且它们的最大长度是512m，所以bitmaps能最大设置2^32(2^3*2^9*2^20)个不同的bit。
#### 操作方式
1. 恒定时间的单个bit操作，例如把某个bit设置为0或者1。或者获取某bit的值。
2. 对一组bit的操作。例如给定范围内bit统计（例如人口统计）。
#### 命令
- Bits设置和获取通过SETBIT 和GETBIT 命令，用法如下：
```xml
SETBIT key offset value     # 设置
GETBIT key offset           # 查询
```
- SETBIT命令第一个参数是位编号，第二个参数是这个位的值，只能是0或者1。如果bit地址超过当前string长度，会自动增大string。
- GETBIT命令指示返回指定位置bit的值。超过范围（寻址地址在目标key的string长度以外的位）的GETBIT总是返回0。三个操作bits组的命令如下：
    1. BITOP 执行两个不同string的位操作.，包括AND，OR，XOR和NOT.
    2. BITCOUNT 统计位的值为1的数量。
    3. BITPOS 寻址第一个为0或者1的bit的位置（寻址第一个为1的bit的位置：bitpos dupcheck 1； 寻址第一个为0的bit的位置：bitpos dupcheck 0）.
#### bitmaps一般的使用场景：
1. 各种实时分析.
2. 存储与对象ID关联的节省空间并且高性能的布尔信息.

### GEO 
#### 简介
> 这个功能可以将用户给定的地理位置（经度和纬度）信息储存起来，并对这些信息进行操作。



### 场景 
#### 计数器
- 计数器可以分为：
    1. 简单计数器，用incr就可以实现；
    2. 有有效期的计数器，设置key的有效期就可以实现；
    3. 简单的去重计数器，用set实现；
    4. 高并发大数去重计数器，用hll实现；